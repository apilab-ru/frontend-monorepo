# Структура

Основные правила
- разбиение на модули происходит из логики одна фича - один модуль
- каждый модуль содержит только соответствующий код и не содержит других модулей
- каждый каталог с модулями содержит или другие каталоги с модулями и/или сами модули, не содержит никакого кода и произвольных каталогов с кодом
- глубина вложенности каталогов с модулями может быть произвольной

---- 
Пример

```
layout/
  components/*
  services/*
users
  students/
    services/*
  mentors/
    components/*
  managers/
    components/*
    services/* 
courses/
  list/
    components/*
  lesson/
    components/*   
```

В этой структуре модулями являются
* layout
* users/students
* users/mentors
* users/managers
* courses/list
* courses/lessons

А каталогами с модулями
* users
* courses

### Общий код для нескольких модулей одного уровня - нужно выносить в отдельный модуль
Пример, общий код для mentors и managers можно вынести в core, и будет так

```
users
  core/
  students/
  mentors/
  managers/
```

Если код требуется переиспользовать с модулями другого уровня, стоит вынести его в библиотеку

```
libs/
  shared/
    user-features/
      ab-test.const.ts
```

### Lazy модули
Стоит помечать префиксом +, так сразу видно, что модуль лениво загружаемый и можно на уровне линтера запретить импорт из него

### Модуль
- не содержит других модулей
- содержит произвольный код связанный с определённой фичей или её частью
- может не иметь своего `NgModule` инстанса
- может содержать только интерфейсы/константы/хэлперы
- имеет стандартную структуру для основных сущностей
  - компоненты внутри `components/` каждый в отдельном каталоге вместе со своими шаблоном/стилями/картинками
    - если есть константы/интрфейсы которые относятся только к данному компоненту, и без него не используются, стоит положить их тут же рядом в const.ts, interface.ts
    - все компоненты модуля лежат на одном (первом) уровне вложенности в `components/` каталоге
  - директивы внутри `directives/` отдельными файлами
  - сервисы внутри `services/` отдельными файлами
    - апи реализуется отдельными сервисами, с постфиксом api.ts
  - модели - interfaces, const, enums - в папку models
  - роутинг, вместе с гардами/резолверами, внутри `routing/`
  - файл модуля (с `NgModule`) всегда один
- картинки компонентов (или другие ассеты) лежат в `assets/` каталоге рядом с файлами компонента

### Роутинг

Для роутинга нет необходимости выделять отдельный (ангуляр) модуль, но есть смысл выделить файлы роутинга в отдельный файл или даже подкаталог если там есть вложенные роуты или гарды/резолверы.

```
// routes.ts

export const USER_ROUTES: Routes = [
  {
    path: 'profile',
    component: UserProfile,
    resolvers: [UserResovers]
  }
];

```

```
// module.ts
import { USER_ROUTES } from './routes';

@NgModule({
  imports: [RouterModule.forChild(USER_ROUTES)],
  // ...
})
export class UserModule {}
```