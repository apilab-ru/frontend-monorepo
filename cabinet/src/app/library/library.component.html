<div *ngIf="isLoad">Loader</div>
<app-list [list]="list">
  <div class="library" *listIterator="let item of list">
    <div class="library__title">{{ item.item.title }} / {{ item.item.original_title }}</div>
    <div class="library__subtitle">
      <span class="library__year">{{ item.item.year }}</span>
      <span *ngIf="item.item.episodes">
      Серий: {{ item.item.episodes }}
    </span>
      <span class="library__rating">{{ item.item.popularity }}</span>
    </div>
    <app-genres class="library__genres"
                [list]="item.item.genre_ids"
                (clickGenre)="onClickGenre($event)"
                [genres]="genres$ | async"></app-genres>

    <button mat-icon-button class="library__delete"
            (click)="deleteItem(item)"
            *ngIf="isLibraryMode$ | async">
      <mat-icon class="mat-icon-rtl-mirror">
        delete_forever
      </mat-icon>
    </button>

    <div class="library__info">
      <img class="library__image" [defaultImage]="placeholder" [lazyLoad]="item.item.image"/>
      <div class="library__description">
        <div>{{ item.item.description }}</div>

        <app-link class="library__link" [link]="item.url" *ngIf="item.url"></app-link>
      </div>
    </div>
    <ng-container *ngIf="(isLibraryMode$ | async) || item.founded">
      <app-status class="library__status"
                  [(ngModel)]="item.status"
                  (ngModelChange)="updateItem(item)"></app-status>
      <app-stars *ngIf="isShowStars(item)"
                 [star]="item.star || 0"
                 (setStars)="onSetStars($event, item)"></app-stars>
    </ng-container>
    <div class="library__submit" *ngIf="!(isLibraryMode$ | async) && !item.founded">
      <button mat-stroked-button (click)="addItem(item)">Добавить</button>
    </div>
  </div>
</app-list>
